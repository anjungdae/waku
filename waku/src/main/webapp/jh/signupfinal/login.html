<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<title>Login Page</title>
<link rel="stylesheet" type="text/css" href="login.css" />
<script type="text/javascript" src="../cordova.js"></script>
<script src="../js/cdv-plugin-fb-connect.js"></script>
<script src="../js/facebook-js-sdk.js"></script> 
<script type="text/javascript" src="../js/Toast.js"></script>
<script type="text/javascript" src="../js/jquery-1.10.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
<script type="text/javascript">
document.addEventListener('deviceready', function() {
  FB.init({
    appId: '547517602021906', // App-Id
    status: true, // 로그인 상태를 확인
    cookie: true, // 쿠키허용
    nativeInterface: CDV.FB,
    useCachedDialogs: false,
    xfbml: true // parse XFBML
  });
  //window.plugins.toast.showShortBottom("initialized");
  FB.getLoginStatus(handleStatusChange);
  FB.Event.subscribe('auth.login', function(response) {
    //window.plugins.toast.showShortBottom("login");
    //document.location.reload();
  });
  FB.Event.subscribe('auth.logout', function(response) {
    //window.plugins.toast.showShortBottom("logout");
    document.location.reload();
  });
  FB.Event.subscribe('auth.statusChange', handleStatusChange);
});
// function logout() {
//   FB.logout(function(response) {
//     window.location.reload();
//   });
// }
function promptLogin() {
    FB.login(null, {scope: 'email'});
  };
function handleStatusChange(response) {
  //window.plugins.toast.showShortTop(response.status);
  if (response.status === 'connected') {
    //window.plugins.toast.showShortCenter('connected');
    FB.api('/me', function(user) {
      if (user) {
        var image = document.getElementById('image');
        image.src = 'http://graph.facebook.com/' + user.id + '/picture';
        var name = document.getElementById('name');
        name.innerHTML = user.name
        var id = document.getElementById('id');
        id.innerHTML = user.id;
      }
    });
  } else if (response.status === 'not_authorized') {
    //window.plugins.toast.showShortCenter("not authorized");
  } else {
    //window.plugins.toast.showShortCenter("unknown");
  }
};
</script>
</head>
<body>
<div id="fb-root"></div>
<!--Login Section-->
<div class="section" id="section1">
  <div class="login-form">
    <h1>Login!</h1>
    <div>
      <form class="form-wrapper">
        <input id="" class="inputbox email" type="text" placeholder="Email id" />
        <input id="" class="inputbox password" type="password" placeholder="Password" />
        <div id="" class="button">Login</div>
      </form>
    </div>
    <div class="social"><a onclick="promptLogin();" class="facebook-login"><span>facebook 로그인</span></a></div>
    <p>Don't have an account? <br><a href="signup.html" target="self">Register Now &raquo;</a></p>
  </div>
</div>
<!--Forget Password Section-->
</body>
</html>